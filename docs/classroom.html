<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Classroom | Kid Learn Quest</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:system-ui, Arial;
  background:linear-gradient(135deg,#6366f1,#22c55e);
  color:#fff;
}
header{
  padding:20px;
  text-align:center;
}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:16px;
  padding:20px;
}
.card{
  background:#fff;
  color:#333;
  border-radius:20px;
  padding:18px;
  text-align:center;
  cursor:pointer;
  box-shadow:0 8px 20px #0003;
  transition:.2s;
}
.card:hover{transform:scale(1.05)}
.card span{font-size:42px}
.activity{
  padding:20px;
  text-align:center;
}
canvas{
  border-radius:16px;
  background:#fff;
  touch-action:none;
}
button{
  margin:10px;
  padding:12px 20px;
  border:none;
  border-radius:14px;
  background:#4f46e5;
  color:#fff;
  font-size:16px;
  cursor:pointer;
}
.hidden{display:none}
</style>
</head>

<body>

<header>
  <h1>üè´ Classroom Activities</h1>
  <p id="kidInfo"></p>
</header>

<div class="grid" id="menu">
  <div class="card" onclick="openActivity('draw')"><span>‚úèÔ∏è</span><br>Draw</div>
  <div class="card" onclick="openActivity('trace')"><span>üî§</span><br>Trace Letters</div>
  <div class="card" onclick="openActivity('count')"><span>üî¢</span><br>Counting</div>
  <div class="card" onclick="openActivity('color')"><span>üé®</span><br>Coloring</div>
</div>

<div class="activity hidden" id="activity"></div>

<script>
/* ===== CHILD ===== */
let kids=JSON.parse(localStorage.getItem("klq_kids")||"[]");
let active=localStorage.getItem("klq_active_kid")||0;
let kid=kids[active]||{name:"Player",age:5,stars:0};
document.getElementById("kidInfo").innerText =
  `${kid.name} ‚Ä¢ Age ${kid.age} ‚Ä¢ ‚≠ê ${kid.stars}`;

/* ===== VOICE ===== */
function speak(t){
  speechSynthesis.cancel();
  let u=new SpeechSynthesisUtterance(t);
  u.rate=0.9;
  speechSynthesis.speak(u);
}

/* ===== SAVE ===== */
function reward(){
  kid.stars=(kid.stars||0)+1;
  kids[active]=kid;
  localStorage.setItem("klq_kids",JSON.stringify(kids));
}

/* ===== NAV ===== */
function back(){
  document.getElementById("activity").classList.add("hidden");
  document.getElementById("menu").classList.remove("hidden");
}

/* ===== ACTIVITIES ===== */
function openActivity(type){
  document.getElementById("menu").classList.add("hidden");
  const a=document.getElementById("activity");
  a.classList.remove("hidden");

  /* DRAW */
  if(type==="draw"){
    speak("Draw anything you like");
    a.innerHTML=`
      <h2>‚úèÔ∏è Free Draw</h2>
      <canvas id="c" width="300" height="300"></canvas><br>
      <button onclick="reward()">‚≠ê Save</button>
      <button onclick="back()">‚¨Ö Back</button>
    `;
    drawCanvas();
  }

  /* TRACE */
  if(type==="trace"){
    const letter="A";
    speak("Trace the letter A");
    a.innerHTML=`
      <h2>üî§ Trace ${letter}</h2>
      <canvas id="c" width="300" height="300"></canvas><br>
      <button onclick="reward()">‚≠ê Done</button>
      <button onclick="back()">‚¨Ö Back</button>
    `;
    drawCanvas(true);
  }

  /* COUNT */
  if(type==="count"){
    const n=Math.floor(Math.random()*5)+1;
    speak(`Count ${n} stars`);
    a.innerHTML=`
      <h2>üî¢ Count the stars</h2>
      <div>${"‚≠ê".repeat(n)}</div>
      <button onclick="reward()">I Counted!</button>
      <button onclick="back()">‚¨Ö Back</button>
    `;
  }

  /* COLOR */
  if(type==="color"){
    speak("Color the circle");
    a.innerHTML=`
      <h2>üé® Coloring</h2>
      <canvas id="c" width="300" height="300"></canvas><br>
      <button onclick="reward()">‚≠ê Done</button>
      <button onclick="back()">‚¨Ö Back</button>
    `;
    drawCanvas();
  }
}

/* ===== CANVAS ===== */
function drawCanvas(trace=false){
  const c=document.getElementById("c");
  const ctx=c.getContext("2d");
  ctx.lineWidth=8;
  ctx.lineCap="round";
  if(trace){
    ctx.font="180px Arial";
    ctx.strokeStyle="#ddd";
    ctx.strokeText("A",60,200);
  }
  let d=false;
  c.onpointerdown=e=>{d=true;ctx.beginPath();ctx.moveTo(e.offsetX,e.offsetY)};
  c.onpointermove=e=>{if(d){ctx.lineTo(e.offsetX,e.offsetY);ctx.stroke()}};
  c.onpointerup=()=>d=false;
}
</script>

</body>
</html>
