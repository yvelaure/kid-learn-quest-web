<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Classroom | Kid Learn Quest</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:"Arial Rounded MT Bold",Arial,sans-serif;
  background:linear-gradient(135deg,#0ea5e9,#22c55e);
  color:#fff;
  text-align:center;
}

/* HEADER */
.header{
  padding:16px;
}
.header h1{margin:6px}

/* MENU */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:16px;
  padding:20px;
}

.card{
  background:#fff;
  color:#333;
  border-radius:22px;
  padding:20px;
  font-size:18px;
  cursor:pointer;
  transition:.25s;
}
.card span{font-size:48px;display:block}
.card:hover{transform:scale(1.05)}

/* GAME */
.game{
  display:none;
  padding:20px;
}

canvas{
  background:#fff;
  border-radius:20px;
  margin-top:10px;
}

button{
  margin:10px;
  padding:12px 20px;
  border:none;
  border-radius:16px;
  background:#facc15;
  font-size:16px;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="header">
  <h1>ğŸ« Classroom</h1>
  <p id="kidInfo"></p>
  â­ <b id="stars">0</b>
</div>

<!-- MENU -->
<div class="grid" id="menu">
  <div class="card" onclick="abcGame()"><span>ğŸ”¤</span>ABC Tracing</div>
  <div class="card" onclick="countGame()"><span>ğŸ”¢</span>Counting</div>
  <div class="card" onclick="drawGame()"><span>ğŸ¨</span>Draw & Paint</div>
</div>

<!-- GAME AREA -->
<div class="game" id="game">
  <canvas id="canvas" width="300" height="300"></canvas><br>
  <button onclick="back()">â¬… Back</button>
</div>

<script>
/* ===== LOAD KID ===== */
const kids=JSON.parse(localStorage.getItem("klq_kids")||"[]");
const idx=localStorage.getItem("klq_active_kid");
const kid=kids[idx];

if(!kid){location.href="index.html"}

kid.stars ||= 0;
kid.avatar ||= "ğŸ§’";

document.getElementById("kidInfo").innerText=
`${kid.avatar} ${kid.name} â€¢ Age ${kid.age}`;
stars.innerText=kid.stars;

/* ===== SAVE ===== */
function save(){
  localStorage.setItem("klq_kids",JSON.stringify(kids));
  stars.innerText=kid.stars;
}

/* ===== NAV ===== */
const menu=document.getElementById("menu");
const game=document.getElementById("game");
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

function back(){
  game.style.display="none";
  menu.style.display="grid";
  ctx.clearRect(0,0,canvas.width,canvas.height);
}

/* ===== ABC TRACING ===== */
function abcGame(){
  menu.style.display="none";
  game.style.display="block";

  ctx.clearRect(0,0,300,300);
  ctx.font="200px Arial";
  ctx.fillStyle="#ddd";
  ctx.fillText("A",70,220);

  drawMode();
}

/* ===== COUNTING GAME ===== */
function countGame(){
  menu.style.display="none";
  game.style.display="block";

  ctx.clearRect(0,0,300,300);
  let count=Math.floor(Math.random()*5)+1;
  ctx.font="40px Arial";
  ctx.fillStyle="#333";
  ctx.fillText(`Tap ${count} times`,60,50);

  let taps=0;
  canvas.onclick=()=>{
    taps++;
    ctx.beginPath();
    ctx.arc(
      Math.random()*280+10,
      Math.random()*280+10,
      10,0,Math.PI*2
    );
    ctx.fill();
    if(taps===count){
      kid.stars+=2;
      save();
      alert("â­ Great counting!");
      canvas.onclick=null;
    }
  };
}

/* ===== DRAW MODE ===== */
function drawGame(){
  menu.style.display="none";
  game.style.display="block";
  drawMode();
}

/* ===== DRAW HANDLER ===== */
function drawMode(){
  let drawing=false;

  canvas.onmousedown=()=>drawing=true;
  canvas.onmouseup=()=>{
    drawing=false;
    kid.stars+=1;
    save();
  };
  canvas.onmousemove=e=>{
    if(!drawing)return;
    const r=canvas.getBoundingClientRect();
    ctx.fillStyle="#000";
    ctx.beginPath();
    ctx.arc(e.clientX-r.left,e.clientY-r.top,4,0,Math.PI*2);
    ctx.fill();
  };
}
</script>

</body>
</html>
