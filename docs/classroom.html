<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Classroom | Kid Learn Quest</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:system-ui, Arial;
  background:linear-gradient(135deg,#fde68a,#fb923c);
  color:#333;
}
header{
  text-align:center;
  padding:20px;
}
.stats{
  display:flex;
  justify-content:center;
  gap:20px;
  font-weight:bold;
}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:16px;
  padding:20px;
}
.card{
  background:#fff;
  border-radius:22px;
  padding:16px;
  text-align:center;
  cursor:pointer;
  box-shadow:0 10px 24px #0002;
  transition:.25s;
}
.card:hover{transform:scale(1.05)}
.card span{font-size:38px}

#activity{
  display:none;
  text-align:center;
  padding:20px;
}
.question{
  font-size:80px;
  animation:bounce 1s infinite alternate;
}
@keyframes bounce{
  from{transform:translateY(0)}
  to{transform:translateY(-10px)}
}

.options button{
  font-size:22px;
  margin:8px;
  padding:14px 18px;
  border:none;
  border-radius:16px;
  cursor:pointer;
  background:#6366f1;
  color:#fff;
}
.options button:hover{background:#4f46e5}

.correct{
  background:#22c55e !important;
}
.wrong{
  background:#ef4444 !important;
}

.back{
  margin-top:20px;
  background:#111827;
}
</style>
</head>

<body>

<header>
  <h1>üè´ Classroom</h1>
  <p id="childInfo"></p>
  <div class="stats">
    <div>‚≠ê Stars: <span id="stars">0</span></div>
    <div>üèÜ Level: <span id="lvl">1</span></div>
  </div>
</header>

<div class="grid" id="subjects"></div>

<div id="activity">
  <h2 id="title"></h2>
  <div class="question" id="question"></div>
  <div class="options" id="options"></div>
  <button class="back" onclick="goBack()">‚¨Ö Back</button>
</div>

<script>
/* ===== CHILD DATA ===== */
const child = JSON.parse(localStorage.getItem("klq_child"));
child.progress = child.progress || {};
child.stars = child.stars || 0;

childInfo.innerText =
 `${child.name} ‚Ä¢ Age ${child.age} ‚Ä¢ ${child.grade}`;
stars.innerText = child.stars;
lvl.innerText = child.progress.level || 1;

/* ===== SUBJECTS ===== */
const SUBJECTS = [
 ["letters","üî§","Letters"],
 ["words","üìñ","Sight Words"],
 ["numbers","üî¢","Numbers"],
 ["math","‚ûï","Math"],
 ["shapes","üî∫","Shapes"],
 ["colors","üé®","Colors"],
 ["patterns","üß©","Patterns"],
 ["count","üçé","Counting"],
 ["time","‚è±Ô∏è","Time"],
 ["space","üìê","Spatial"]
];

SUBJECTS.forEach(s=>{
  const d=document.createElement("div");
  d.className="card";
  d.innerHTML=`<span>${s[1]}</span><br>${s[2]}`;
  d.onclick=()=>start(s[0],s[2]);
  subjects.appendChild(d);
});

/* ===== GAME ENGINE ===== */
let currentSubject="";
let subjectName="";
let level=1;

function start(sub,name){
  currentSubject=sub;
  subjectName=name;
  level = child.progress[sub] || 1;
  subjects.style.display="none";
  activity.style.display="block";
  next();
}

function next(){
  options.innerHTML="";
  title.innerText=`${subjectName} ‚Ä¢ Level ${level}`;
  let q="", answers=[], correct;

  const age = child.age;

  if(currentSubject==="letters"){
    const letters="ABCDEFG";
    correct = letters[level%letters.length];
    q = correct;
    answers = shuffle(letters.slice(0,age+3).split(""));
  }

  if(currentSubject==="numbers"){
    correct = level;
    q = correct;
    answers = shuffle(range(1,age+3));
  }

  if(currentSubject==="math"){
    let a = level, b = age>5?2:1;
    correct = a+b;
    q = `${a} + ${b}`;
    answers = shuffle([correct,correct+1,correct-1]);
  }

  if(currentSubject==="shapes"){
    const s=["üî∫","‚¨õ","‚ö™","‚≠ê","‚¨ú"];
    correct = s[level%s.length];
    q = correct;
    answers = shuffle(s.slice(0,age+2));
  }

  if(currentSubject==="colors"){
    const c=["red","blue","yellow","green","purple"];
    correct = c[level%c.length];
    q = "üé®";
    answers = shuffle(c.slice(0,age+2));
  }

  if(currentSubject==="patterns"){
    q="üî¥üü°üî¥ ?";
    correct="üî¥";
    answers=["üî¥","üü°"];
  }

  if(currentSubject==="count"){
    correct=level;
    q="üçé".repeat(level);
    answers=shuffle(range(1,age+3));
  }

  if(currentSubject==="time"){
    q="‚è∞ Morning?";
    correct="‚òÄÔ∏è";
    answers=["‚òÄÔ∏è","üåô"];
  }

  if(currentSubject==="space"){
    q="‚¨ÜÔ∏è‚û°Ô∏è‚¨áÔ∏è ?";
    correct="‚¨ÖÔ∏è";
    answers=["‚¨ÖÔ∏è","‚û°Ô∏è"];
  }

  question.innerText=q;

  answers.forEach(a=>{
    const b=document.createElement("button");
    b.innerText=a;
    b.onclick=()=>check(a,b,correct);
    options.appendChild(b);
  });
}

function check(ans,btn,correct){
  if(ans==correct){
    btn.classList.add("correct");
    child.stars++;
    stars.innerText=child.stars;
    if(child.stars%5===0) alert("üéâ Level Up!");
    level++;
    child.progress[currentSubject]=level;
    save();
    setTimeout(next,600);
  }else{
    btn.classList.add("wrong");
  }
}

function save(){
  localStorage.setItem("klq_child",JSON.stringify(child));
}

function goBack(){
  activity.style.display="none";
  subjects.style.display="grid";
}

/* ===== HELPERS ===== */
function range(a,b){return Array.from({length:b-a+1},(_,i)=>i+a);}
function shuffle(arr){return arr.sort(()=>Math.random()-0.5);}
</script>

</body>
</html>
