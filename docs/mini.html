<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Learning Games | Kid Learn Quest</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#0f172a;
  --card:#ffffff;
  --accent:#22c55e;
  --accent2:#6366f1;
}
body{
  margin:0;
  font-family:system-ui, Arial;
  background:linear-gradient(135deg,#0ea5e9,#22c55e);
  color:#fff;
}
header{
  text-align:center;
  padding:20px;
}
.progress{
  width:90%;
  height:12px;
  background:#0003;
  border-radius:20px;
  margin:10px auto;
}
.progress span{
  display:block;
  height:100%;
  background:var(--accent);
  border-radius:20px;
}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:16px;
  padding:20px;
}
.card{
  background:var(--card);
  color:#333;
  border-radius:18px;
  padding:18px;
  text-align:center;
  box-shadow:0 8px 20px #0003;
  cursor:pointer;
  transition:.2s;
}
.card:hover{transform:scale(1.05)}
.card span{font-size:42px}
.game{
  padding:20px;
  text-align:center;
}
button{
  padding:12px 20px;
  border:none;
  border-radius:14px;
  background:var(--accent2);
  color:#fff;
  font-size:16px;
  cursor:pointer;
  margin:6px;
}
.choice{
  font-size:40px;
  padding:12px;
}
.hidden{display:none}
</style>
</head>

<body>

<header>
  <h1>ğŸ® Learning Games</h1>
  <p id="kid"></p>
  <div class="progress"><span id="xpBar"></span></div>
  <p>â­ Stars: <b id="stars"></b> | ğŸ† Level: <b id="level"></b></p>
</header>

<div class="grid" id="hub">
  <div class="card" onclick="start('abc')"><span>ğŸ”¤</span><br>ABC</div>
  <div class="card" onclick="start('math')"><span>ğŸ”¢</span><br>Math</div>
  <div class="card" onclick="start('shapes')"><span>ğŸ”º</span><br>Shapes</div>
  <div class="card" onclick="start('colors')"><span>ğŸ¨</span><br>Colors</div>
  <div class="card" onclick="start('memory')"><span>ğŸ§ </span><br>Memory</div>
</div>

<div class="game hidden" id="game"></div>

<script>
/* ========= CHILD PROFILE ========= */
let kids=JSON.parse(localStorage.getItem("klq_kids")||"[]");
let active=localStorage.getItem("klq_active_kid")||0;
let kid=kids[active]||{name:"Player",age:5,stars:0,level:1,skill:{}};
kid.skill=kid.skill||{};
["abc","math","shapes","colors","memory"].forEach(s=>{
  kid.skill[s]=kid.skill[s]||{xp:0,level:1};
});

  function difficulty(kid){
  if(kid.age<=4) return 1;
  if(kid.age<=6) return 2;
  if(kid.age<=8) return 3;
  return 4;
}
function save(){
  kids[active]=kid;
  localStorage.setItem("klq_kids",JSON.stringify(kids));
}

/* ========= UI ========= */
kid.stars ||=0; kid.level ||=1;
document.getElementById("kid").textContent=`ğŸ‘§ ${kid.name} â€¢ Age ${kid.age}`;
document.getElementById("stars").textContent=kid.stars;
document.getElementById("level").textContent=kid.level;
document.getElementById("xpBar").style.width=Math.min(kid.stars*5,100)+"%";

/* ========= VOICE ========= */
function speak(text){
  speechSynthesis.cancel();
  const u=new SpeechSynthesisUtterance(text);
  u.rate=0.9;
  u.pitch=1.1;
  speechSynthesis.speak(u);
}
/* ========= CORE ========= */
function reward(subject){
  kid.stars++;
  kid.skill[subject].xp++;
  if(kid.skill[subject].xp>=5){
    kid.skill[subject].level++;
    kid.skill[subject].xp=0;
  }
  if(kid.stars%10===0) kid.level++;
  save();
}

  speak("Choose the correct answer");
speak("Great job!");
speak("Try again");
function back(){
  document.getElementById("game").classList.add("hidden");
  document.getElementById("hub").classList.remove("hidden");
}

/* ========= GAMES ========= */
function start(type){
  document.getElementById("hub").classList.add("hidden");
  const g=document.getElementById("game");
  g.classList.remove("hidden");

  if(type==="abc"){
    const letters="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
    const l=letters[Math.floor(Math.random()*5)];
    speak(`Find the letter ${l}`);
    g.innerHTML=`<h2>ğŸ”¤ Tap ${l}</h2>`+
      letters.slice(0,5).map(x=>`<button class="choice" onclick="pick('${type}','${x}','${l}')">${x}</button>`).join("")+
      `<br><button onclick="back()">â¬… Back</button>`;
  }

  if(type==="math"){
    let a=Math.floor(Math.random()*5)+kid.skill.math.level;
    speak(`What is ${a} plus one`);
    g.innerHTML=`<h2>${a} + 1 = ?</h2>
      <button onclick="pick('${type}',${a+1},${a+1})">${a+1}</button>
      <button onclick="pick('${type}',${a+2},${a+1})">${a+2}</button>
      <br><button onclick="back()">â¬… Back</button>`;
  }

  if(type==="shapes"){
    let s=["â¬›","ğŸ”º","âšª","â­"];
    let ans=s[Math.floor(Math.random()*3)];
    speak(`Find the shape`);
    g.innerHTML=`<h2>Select ${ans}</h2>`+
      s.slice(0,3).map(x=>`<button class="choice" onclick="pick('${type}','${x}','${ans}')">${x}</button>`).join("")+
      `<br><button onclick="back()">â¬… Back</button>`;
  }

  if(type==="colors"){
    let c=["red","blue","yellow"];
    let ans=c[Math.floor(Math.random()*3)];
    speak(`Tap ${ans}`);
    g.innerHTML=`<h2>Tap ${ans.toUpperCase()}</h2>`+
      c.map(x=>`<div onclick="pick('${type}','${x}','${ans}')" style="background:${x};width:70px;height:70px;border-radius:50%;display:inline-block;margin:10px"></div>`).join("")+
      `<br><button onclick="back()">â¬… Back</button>`;
  }

  if(type==="memory"){
    let icons=["ğŸ¶","ğŸ±","ğŸ¸","ğŸ¦Š"];
    let cards=[...icons,...icons].sort(()=>Math.random()-0.5);
    let open=null;
    g.innerHTML=`<h2>ğŸ§  Memory Match</h2><div id="board"></div><button onclick="back()">â¬… Back</button>`;
    const b=document.getElementById("board");
    cards.forEach(c=>{
      let btn=document.createElement("button");
      btn.textContent="â“";
      btn.className="choice";
      btn.onclick=()=>{
        btn.textContent=c;
        if(!open){open=btn;}
        else{
          if(open.textContent===btn.textContent){
            reward("memory");
          }else{
            setTimeout(()=>{btn.textContent="â“";open.textContent="â“"},500);
          }
          open=null;
        }
      };
      b.appendChild(btn);
    });
  }
}

function pick(subject,choice,answer){
  if(choice==answer){
    reward(subject);
    speak("Great job");
    start(subject);
  }else{
    speak("Try again");
  }
}
</script>

</body>
</html>
