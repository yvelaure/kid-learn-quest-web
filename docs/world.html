<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>World Map | Kid Learn Quest</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:linear-gradient(#60a5fa,#34d399);
  color:#fff;
}

.header{
  padding:16px;
  text-align:center;
}

.map{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:20px;
  padding:20px;
}

.world{
  width:90%;
  max-width:420px;
  background:#fff;
  color:#333;
  border-radius:24px;
  padding:20px;
  text-align:center;
  position:relative;
}

.world.locked{
  opacity:.4;
}

.world span{
  font-size:48px;
  display:block;
}

.world button{
  margin-top:10px;
  padding:10px 18px;
  border:none;
  border-radius:14px;
  background:#4f46e5;
  color:#fff;
  font-size:16px;
  cursor:pointer;
}

.path{
  width:6px;
  height:30px;
  background:#fff;
  border-radius:10px;
}

.footer{
  padding:20px;
}
</style>
</head>

<body>

<div class="header">
  <h1>üåç Learning World</h1>
  <p id="kidInfo"></p>
  <p>‚≠ê Stars: <b id="stars">0</b> | Level: <b id="level">1</b></p>
</div>

<div class="map" id="map"></div>

<div class="footer">
  <button style="width:100%" onclick="goHome()">‚¨Ö Back Home</button>
</div>

<script>
/* ===== ACTIVE KID ===== */
const kids = JSON.parse(localStorage.getItem("klq_kids")||"[]");
const active = localStorage.getItem("klq_active_kid");
const kid = kids[active];

if(!kid){
  alert("No child selected");
  location.href="index.html";
}

kid.level = kid.level || 1;
kid.stars = kid.stars || 0;

document.getElementById("kidInfo").innerText =
  `${kid.avatar} ${kid.name} ‚Ä¢ Age ${kid.age}`;
document.getElementById("stars").innerText = kid.stars;
document.getElementById("level").innerText = kid.level;

/* ===== WORLDS ===== */
const worlds = [
  {id:1, name:"Alphabet Land", icon:"üî§", unlock:1},
  {id:2, name:"Number Valley", icon:"üî¢", unlock:2},
  {id:3, name:"Shape City", icon:"üî∫", unlock:3},
  {id:4, name:"Color Forest", icon:"üé®", unlock:4},
  {id:5, name:"Memory Mountain", icon:"üß†", unlock:5}
];

const map = document.getElementById("map");

worlds.forEach((w,i)=>{
  const div=document.createElement("div");
  const locked = kid.level < w.unlock;
  div.className = "world"+(locked?" locked":"");
  div.innerHTML = `
    <span>${w.icon}</span>
    <h2>${w.name}</h2>
    ${locked
      ? `<p>üîí Unlock at Level ${w.unlock}</p>`
      : `<button onclick="enterWorld(${w.id})">Enter</button>`
    }
  `;
  map.appendChild(div);

  if(i < worlds.length-1){
    const path=document.createElement("div");
    path.className="path";
    map.appendChild(path);
  }
});

/* ===== ENTER WORLD ===== */
function enterWorld(id){
  // For now all worlds lead to Mini Games
  window.location.href = "mini.html";
}

function goHome(){
  window.location.href="index.html";
}
</script>

</body>
</html>
